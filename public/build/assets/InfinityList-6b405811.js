import{j as l,F as E,a as r}from"./jsx-runtime-5df380c3.js";import{r as v}from"./index-9548188c.js";import{r as e}from"./app-ba177ede.js";const S=({defaultItems:m,Widget:u})=>{const[f,d]=e.useState(m??[]),[t,s]=e.useState(!1),[o,p]=e.useState(!1),[h,w]=e.useState(2);e.useEffect(()=>(window.addEventListener("scroll",a),()=>window.removeEventListener("scroll",a)),[]),e.useEffect(()=>{t&&g()},[t]);function a(){(window.innerHeight+document.documentElement.scrollTop)/2,!(window.innerHeight+document.documentElement.scrollTop<document.documentElement.offsetHeight-1e3||t||o)&&s(!0)}async function g(){if(!o)try{const n=await(await axios.get(`/api/categories?page=${h}`)).data;if(n.length===0){s(!1),p(!0),window.removeEventListener("scroll",a);return}d(c=>[...c,...n]),s(!1),w(c=>c+1)}catch{s(!1)}}return l(E,{children:[r("ul",{className:"list-group mb-2",children:f.map((i,n)=>r(u,{item:i},n))}),t&&!o&&l("div",{className:"w-full h-20",children:[r(v.Spinner,{className:"h-12 w-12 mx-auto"}),r("span",{})]})]})};export{S as default};
