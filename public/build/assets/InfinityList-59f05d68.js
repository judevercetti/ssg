import{j as l,F as E,a as o}from"./jsx-runtime-b804a66f.js";import{r as S}from"./index-519fa432.js";import{r as e}from"./app-c3da390d.js";const L=({defaultItems:m,Widget:u})=>{const[f,d]=e.useState(m??[]),[s,n]=e.useState(!1),[a,h]=e.useState(!1),[p,g]=e.useState(2);e.useEffect(()=>(window.addEventListener("scroll",i),()=>window.removeEventListener("scroll",i)),[]),e.useEffect(()=>{s&&w()},[s]);function i(){const t=(window.innerHeight+document.documentElement.scrollTop)/2;window.innerHeight+document.documentElement.scrollTop<document.documentElement.offsetHeight-t||s||a||n(!0)}async function w(){if(!a)try{const r=await(await axios.get(`/api/categories?page=${p}`)).data;if(r.length===0){n(!1),h(!0),window.removeEventListener("scroll",i);return}d(c=>[...c,...r]),n(!1),g(c=>c+1)}catch{n(!1)}}return l(E,{children:[o("ul",{className:"list-group mb-2",children:f.map((t,r)=>o(u,{item:t},r))}),s&&!a&&l("div",{className:"w-full h-20",children:[o(S.Spinner,{className:"h-12 w-12 mx-auto"}),o("span",{})]})]})};export{L as default};
